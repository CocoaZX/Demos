//
//  AFAPI.m
//  AFNetwork
//
//  Created by MacBook on 14-6-4.
//  Copyright (c) 2014年 YZB. All rights reserved.
//
/*
 0	Success
 6101	60秒之内只能请求一次
 6102	手机号不能为空
 6103	手机号号码格式不对
 6104	请输入验证码
 6105	验证码错误
 6106	6-16个字符，请使用字母加数字或符号的组合密码
 6107	旧密码输入错误
 6108	参数错误
 6109	签名不能为空
 6110	签名错误
 6111	获取版本信息失败
 6201	注册失败
 6202	您的手机号已注册，请登录
 6203	登录失败
 6204	用户名或密码错误
 6205	cookie 已过期，请重新登录
 6206	登出失败
 6207	用户不存在
 6208	获取用户信息失败
 6209	昵称过长
 6210	个性签名过长
 6211	修改个人信息修改失败
 6212	密码修改失败
 6301	照片上传失败
 6302	获取照片失败
 6303	更新照片失败
 6304	删除照片失败
 6401	获取评论失败
 6501	点赞失败
 6502	已赞
 6503	取消点赞失败
 6504	未点赞或点赞已取消
 6601	收藏失败
 6602	已收藏
 6603	未收藏或收藏已取消

*/

#import "AFAPI.h"
#import "AFNetworking.h"

@interface AFAPI ()

@end

//static NSString * const AFAppDotNetAPIBaseURLString = @"http://42.99.16.17:8080/";//测试
//static NSString * const AFAppDotNetAPIBaseURLString = DEFAULTURL; //正式

//

@implementation AFAPI

+ (instancetype)shareAFAPI {
    static AFAPI *_sharedClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSURLSessionConfiguration *config = [NSURLSessionConfiguration defaultSessionConfiguration];
//        [config setHTTPAdditionalHeaders:@{@"cookies":@""}];//header
        [config setHTTPShouldSetCookies:YES];
        
        //设置我们的缓存大小 其中内存缓存大小设置10M  磁盘缓存5M
        NSURLCache *cache = [[NSURLCache alloc] initWithMemoryCapacity:10 * 1024 * 1024 diskCapacity:50 * 1024 * 1024 diskPath:nil];
        [config setURLCache:cache];
        
        _sharedClient = [[AFAPI alloc] initWithBaseURL:[NSURL URLWithString:DEFAULTURL]];//sessionConfiguration
        _sharedClient.securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];
//        _sharedClient.responseSerializer = [AFJSONResponseSerializer serializer];不理解
    });
    
    return _sharedClient;
}


@end
